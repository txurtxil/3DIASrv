[2025-11-07 23:04:51] Prompt: Miniatura ultra-detallada de la Torre Eiffel, dimensiones: 30mm ancho × 30mm fondo × 35mm alto. Incluye: 4 patas arqueadas con refuerzos diagonales visibles, 3 plataformas horizontales con barandillas, celosía triangular precisa en todo el fuste (resolución mínima 1.2mm), remate superior con antena estilizada y base plana integrada para impresión sin soportes. Todo centrado en (0,0,0), orientado para impresión vertical, con espesores mínimos de 1.2mm en barras finas y 2mm en zonas críticas. Usa $fn=36 para suavidad, y agrupa geometría en módulos reutilizables comentados (// Base, // Arcos, // Celosía, etc.). Compatible con OpenSCAD 2021+, optimizado para FDM/PETG.
[2025-11-07 23:04:51] Iniciando generación (sin timeout)...
[2025-11-07 23:04:51] Iniciando Node.js...
[2025-11-07 23:06:03] Node.js finalizado. Código: 0
STDOUT:
// Global Parameters
base_width = 30;
total_height = 35;
beam_thin = 1.2;  // Minimum thickness for thin bars (lattice, railings)
beam_critical = 2.0; // Minimum thickness for critical zones (main legs, platforms)
$fn = 24; // Resolution for curves

// Define key heights for platforms and main structure segments
h_base_plate = 0;
h1_platform = total_height * 0.2;  // Approx. 7mm
h2_platform = total_height * 0.5;  // Approx. 17.5mm
h3_platform = total_height * 0.8;  // Approx. 28mm
h_top_structure = total_height * 0.9; // Point where the main structure ends, before antenna
h_antenna = total_height;

// Define widths at different heights for the tapering structure
// These are half-widths from center to corner
w_base_corner = base_width / 2;
w1_platform_corner = w_base_corner * 0.6; // Width at 1st platform
w2_platform_corner = w_base_corner * 0.35; // Width at 2nd platform
w3_platform_corner = w_base_corner * 0.15; // Width at 3rd platform
w_top_structure_corner = w_base_corner * 0.05; // Very top of structure before antenna

// Function to generate a beam between two points with a given thickness
// Points P1 and P2, thickness t
module beam(p1, p2, t) {
    len = norm(p2 - p1);
    angle_xy = atan2(p2[1] - p1[1], p2[0] - p1[0]);
    angle_yz = atan2(p2[2] - p1[2], norm([p2[0] - p1[0], p2[1] - p1[1]]));

    translate(p1)
    rotate([0, angle_yz, angle_xy])
    translate([0, -t/2, -t/2]) // Center the beam cross-section
    cube([len, t, t]);
}

// Module for the main flat base
module base_plate() {
    // Centered at (0,0,0) on the X-Y plane, height starts at Z=0
    translate([-base_width/2, -base_width/2, h_base_plate])
    cube([base_width, base_width, beam_critical]);
}

// Module for the arched legs at the base, and initial diagonal bracing
module main_arched_legs() {
    arch_peak_height = h1_platform * 0.6; // Height of the arch's peak from base_plate top
    arch_span = 8; // Inner width of the arch cutout
    corner_block_width = w_base_corner * 0.5; // Width of each main corner piece

    // Four corner blocks, forming the outer structure of the base
    for (i = [0, 90, 180, 270]) {
        rotate([0, 0, i])
        // Position each block so its inner face aligns with a square
        translate([w_base_corner - corner_block_width, -corner_block_width/2, h_base_plate + beam_critical]) {
            difference() {
                // The main corner block (slightly tapering upwards)
                linear_extrude(height = arch_peak_height + beam_critical, convexity = 10, scale = 0.9)
                cube([corner_block_width, corner_block_width, 0.1]); // Dummy height for linear_extrude

                // Arch cutout (a cylinder subtracted from the side)
                translate([0, corner_block_width/2, arch_peak_height - arch_span/2]) // Position for cylinder center
                rotate([0, 90, 0]) // Rotate cylinder to be horizontal, cutting the face
                cylinder(h = corner_block_width + 0.1, r = arch_span/2); // Cut a semi-circle
            }
        }
    }

    // Central cross beams at the arch peak level
    beam([-w_base_corner * 0.8, 0, arch_peak_height],
         [ w_base_corner * 0.8, 0, arch_peak_height], beam_critical);
    beam([0, -w_base_corner * 0.8, arch_peak_height],
         [0,  w_base_corner * 0.8, arch_peak_height], beam_critical);

    // Diagonal braces for the base section
    // Connecting outer corners of the legs, slightly above the arch.
    diag_brace_z_level = arch_peak_height + beam_critical;
    diag_brace_offset_xy = w_base_corner * 0.8; 
    
    beam([-diag_brace_offset_xy, -diag_brace_offset_xy, diag_brace_z_level],
         [ diag_brace_offset_xy,  diag_brace_offset_xy, diag_brace_z_level], beam_thin);
    beam([ diag_brace_offset_xy, -diag_brace_offset_xy, diag_brace_z_level],
         [-diag_brace_offset_xy,  diag_brace_offset_xy, diag_brace_z_level], beam_thin);
}

// Module for a single platform with railing
module platform(z_height, platform_half_width, platform_height, railing_height) {
    // Platform base
    translate([-platform_half_width, -platform_half_width, z_height])
    cube([platform_half_width*2, platform_half_width*2, platform_height]);

    // Railings
    rail_offset = beam_critical / 2; // Offset railings slightly inwards
    rail_thickness = beam_thin;
    
    // Front railing
    translate([-platform_half_width + rail_offset, -platform_half_width + rail_offset, z_height + platform_height])
    cube([platform_half_width*2 - rail_offset*2, rail_thickness, railing_height]);

    // Back railing
    translate([-platform_half_width + rail_offset, platform_half_width - rail_offset - rail_thickness, z_height + platform_height])
    cube([platform_half_width*2 - rail_offset*2, rail_thickness, railing_height]);

    // Left railing
    translate([-platform_half_width + rail_offset, -platform_half_width + rail_offset + rail_thickness, z_height + platform_height])
    cube([rail_thickness, platform_half_width*2 - rail_offset*2 - rail_thickness*2, railing_height]);

    // Right railing
    translate([platform_half_width - rail_offset - rail_thickness, -platform_half_width + rail_offset + rail_thickness, z_height + platform_height])
    cube([rail_thickness, platform_half_width*2 - rail_offset*2 - rail_thickness*2, railing_height]);
}

// Module for the main lattice structure segment between two Z levels
// Generates vertical, horizontal, and X-pattern diagonal beams
module lattice_segment(z_start, z_end, width_start, width_end) {
    
    // Calculate the points for the 4 corners at start and end Z levels
    // Points are (x, y, z) for each corner
    p_s = [ // Start points (bottom)
        [ width_start,  width_start, z_start ],
        [-width_start,  width_start, z_start ],
        [ width_start, -width_start, z_start ],
        [-width_start, -width_start, z_start ]
    ];
    p_e = [ // End points (top)
        [ width_end,  width_end, z_end ],
        [-width_end,  width_end, z_end ],
        [ width_end, -width_end, z_end ],
        [-width_end, -width_end, z_end ]
    ];

    // Vertical beams at corners
    for (i = [0:3]) {
        beam(p_s[i], p_e[i], beam_thin);
    }

    // Horizontal beams at start of segment (base of the current lattice section)
    beam(p_s[0], p_s[1], beam_thin); // Front
    beam(p_s[0], p_s[2], beam_thin); // Right
    beam(p_s[1], p_s[3], beam_thin); // Left
    beam(p_s[2], p_s[3], beam_thin); // Back
    
    // Horizontal beams at end of segment (top of the current lattice section)
    beam(p_e[0], p_e[1], beam_thin);
    beam(p_e[0], p_e[2], beam_thin);
    beam(p_e[1], p_e[3], beam_thin);
    beam(p_e[2], p_e[3], beam_thin);

    // Diagonal braces on each face (creating X-patterns / triangles)
    // Face 1 (e.g., between p_s[0] and p_s[1])
    beam(p_s[0], p_e[1], beam_thin);
    beam(p_s[1], p_e[0], beam_thin);

    // Face 2 (e.g., between p_s[0] and p_s[2])
    beam(p_s[0], p_e[2], beam_thin);
    beam(p_s[2], p_e[0], beam_thin);
    
    // Face 3 (e.g., between p_s[1] and p_s[3])
    beam(p_s[1], p_e[3], beam_thin);
    beam(p_s[3], p_e[1], beam_thin);

    // Face 4 (e.g., between p_s[2] and p_s[3])
    beam(p_s[2], p_e[3], beam_thin);
    beam(p_s[3], p_e[2], beam_thin);
}

// Module for the top finial and stylized antenna
module top_finial_antenna() {
    finial_height = h_top_structure - h3_platform - beam_critical;
    finial_base_width = w3_platform_corner * 1.5; // Slightly larger than top platform for visual impact

    // Finial (pyramid shape)
    translate([-finial_base_width/2, -finial_base_width/2, h3_platform + beam_critical])
    linear_extrude(height = finial_height, convexity = 10, center = false, scale = 0.1)
    square([finial_base_width, finial_base_width]);

    // Antenna
    antenna_diameter = beam_thin;
    antenna_height = h_antenna - h_top_structure;
    translate([0, 0, h_top_structure])
    cylinder(h = antenna_height, r = antenna_diameter/2);
}

// --- Main Assembly ---
union() {
    // Base Plate
    base_plate();

    // Arched Legs and initial base structure with diagonal braces
    main_arched_legs();

    // First Platform
    platform(h1_platform, w1_platform_corner, beam_critical, 3); // z_height, half_width, platform_height, railing_height

    // Lattice structure from 1st to 2nd platform
    lattice_segment(h1_platform + beam_critical, h2_platform, w1_platform_corner, w2_platform_corner);

    // Second Platform
    platform(h2_platform, w2_platform_corner, beam_critical, 2.5);

    // Lattice structure from 2nd to 3rd platform
    lattice_segment(h2_platform + beam_critical, h3_platform, w2_platform_corner, w3_platform_corner);

    // Third Platform
    platform(h3_platform, w3_platform_corner, beam_critical, 2);

    // Lattice structure from 3rd platform to top structure point
    lattice_segment(h3_platform + beam_critical, h_top_structure, w3_platform_corner, w_top_structure_corner);

    // Top Finial and Antenna
    top_finial_antenna();
}

[2025-11-07 23:06:03] Código guardado. Renderizando STL...
[2025-11-07 23:06:25] OpenSCAD finalizado. Código: 0
OpenSCAD STDERR:
Could not initialize localization.
WARNING: Ignoring 3D child object for 2D operation in file model.scad, line 58
Geometries in cache: 173
Geometry cache size in bytes: 138880
CGAL Polyhedrons in cache: 12
CGAL cache size in bytes: 5437744
Total rendering time: 0:00:21.655
   Top level object is a 3D object:
   Simple:        yes
   Vertices:     1716
   Halfedges:    5320
   Edges:        2660
   Halffacets:   1920
   Facets:        960
   Volumes:         5

[2025-11-07 23:06:25] ¡Éxito total!
